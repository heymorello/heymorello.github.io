<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<title>Скачки и задачки</title>
<link href="https://fonts.googleapis.com/css2?family=Marmelad&display=swap" rel="stylesheet">
<style>
html, body {
  margin: 0;
  padding: 0;
  font-family: 'Marmelad', sans-serif;
  background: #b18155;
  overflow-y: auto;
}

/* ===== КНОПКИ ===== */
.top-buttons {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 100;
  display: flex;
  gap: 12px;
}
.top-buttons button {
  width: 60px;
  height: 60px;
  font-size: 28px;
  border: none;
  border-radius: 50%;
  background: #fff;
  cursor: pointer;
}

/* ===== ЗАГОЛОВОК ===== */
.header {
  text-align: center;
  color: #fff;
  padding: 30px 0 5px;
}
.header h1 { font-size: clamp(32px, 6vw, 64px); margin: 0; }
.header h2 { font-size: 20px; font-weight: normal; margin-top: 8px; color: #fff; }

/* ===== БЛОК С ЛОШАДЬМИ ===== */
.race-container {
  width: 95%;
  height: 800px;
  max-width: 1200px;
  margin: 20px auto;
  border: 4px solid #fff;
  border-radius: 12px;
  overflow: auto;
  background: url("https://txtrs.ru/textures/sand/sand-6.jpg") repeat;
  background-size: 450px auto;
  position: relative;
}

.race-inner {
  position: relative;
  width: 3000px;
  height: 100%;
}

.sky {
  position: absolute;
  top: 0;
  width: 100%;
  height: 150px;
  background: #64a8be;
  z-index: 1;
}

.fence {
  position: absolute;
  top: -10px; /* поднят на 10px */
  width: 3000px;
  height: 230px;
  background: url("https://i.postimg.cc/cJJ3rDsb/Chat-GPT-Image-21-2025-07-52-16.png") repeat-x bottom;
  background-size: 800px auto;
  z-index: 2;
}

.lane {
  position: absolute;
  left: 0;
  width: 100%;
  height: 2px;
  background: rgba(255,255,255,0.9);
  z-index: 3;
}

.flags-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10; /* подсказки поверх лошадей */
  pointer-events: none;
}

.flag {
  position: absolute;
  width: 60px;
  height: auto;
  cursor: pointer;
  pointer-events: auto; /* чтобы клики работали */
}
.flag::after {
  content: attr(data-tip);
  position: absolute;
  top: -35px;
  left: 50%;
  transform: translateX(-50%);
  padding: 6px 8px;
  background: white;
  color: black;
  border-radius: 6px;
  font-size: 14px;
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s;
  white-space: nowrap;
}
.flag:hover::after { opacity: 1; }

.horse {
  position: absolute;
  cursor: pointer;
  z-index: 6;
  transition: left 3s ease-in-out;
}
.horse img {
  display: block;
  height: auto;
  user-select: none;
  -webkit-user-drag: none;
}
.horse::after {
  content: attr(data-points) " ⚡️ скорости";
  position: absolute;
  bottom: 75%;
  left: 50%;
  transform: translateX(-50%);
  padding: 6px 8px;
  background: white;
  color: black;
  border-radius: 6px;
  font-size: 14px;
  opacity: 0;
  pointer-events: none;
  transition: opacity .2s;
  white-space: nowrap;
}
.horse:hover::after { opacity: 1; }

/* ===== ТАБЛИЦА ===== */
.results {
  width: 90%;
  max-width: 1200px;
  margin: 20px auto;
  background: rgba(255,255,255,0.9);
  padding: 20px;
  border-radius: 12px;
}
.results table { width: 100%; border-collapse: collapse; text-align: center; font-size: 16px; }
.results th, .results td { border: 1px solid #333; padding: 10px; }
.results td:nth-child(2) { text-align: justify; }
</style>
</head>
<body>
<div class="top-buttons"><button>❓</button><button>⚡️</button></div>

<div class="header">
  <h1>Скачки и задачки</h1>
  <h2>Волшебник, добро пожаловать на скачки! <br>В этом семестре у нас гриффиндорское дерби. Веди своего скакуна к победе.</h2>
</div>

<div class="race-container">
  <div class="race-inner" id="race">
    <div class="sky"></div>
    <div class="fence"></div>
    <div class="flags-container" id="flags"></div>
  </div>
</div>

<div class="header"><h1>Рейтинг участников</h1></div>
<div class="results"><table>…</table></div>

<script>
const horseImages = [
"https://i.ibb.co/tTWMGsWW/Chat-GPT-Image-23-2025-17-23-57.png",
"https://i.ibb.co/Jwp91sZ9/Chat-GPT-Image-23-2025-17-57-01.png",
"https://i.ibb.co/wNJ2x6Xz/20250920-1029-remix-01k5jsen2he3ebb44mn75tbs8q.png",
"https://i.ibb.co/pjXSLx0t/Chat-GPT-Image-23-2025-17-40-57.png",
"https://i.ibb.co/m5LhSWN1/20250920-1529-remix-01k5kakeq0fsaskz0yr5q2mzby.png",
"https://i.ibb.co/Pvn0PrtF/Chat-GPT-Image-24-2025-07-23-43.png",
"https://i.ibb.co/Ps8Mr98J/20250920-1357-remix-01k5k5cjmcf2ja5878w22hhxh7.png",
"https://i.ibb.co/VWvRft9V/Chat-GPT-Image-24-2025-07-39-30.png",
"https://i.ibb.co/vxLQJcsj/20250920-1128-remix-01k5jwttgrervbg17xtjk37xgs.png",
"https://i.ibb.co/1tdkmwVf/Chat-GPT-Image-Sep-24-2025-01-31-58-PM.png"
];

const horseSizes = [200,200,200,200,200,200,200,200,200,200];
const horsePoints = [0,50,100,200,300,150,400,250,350,500]; 
const race = document.getElementById('race');
const flagsContainer = document.getElementById('flags');
const raise = 50; // смещение вверх

function placeHorses() {
  race.querySelectorAll('.horse, .lane').forEach(el => el.remove());
  flagsContainer.innerHTML = '';
  const trackStep = 120;
  const pixelsPerPoint = 5; 
  const totalPoints = 550;

  for (let i = 0; i < horsePoints.length; i++) {
    // линии дорожек
    const lane = document.createElement('div');
    lane.className = 'lane';
    lane.style.top = 270 - raise + i * trackStep + 'px';
    race.appendChild(lane);

    // внутри placeHorses()
for (let x = 100; x <= totalPoints; x += 100) {
  const flag = document.createElement('img');
  flag.src = "https://i.postimg.cc/DzM4VWsT/Flag-Animation-After-Effects-Course-Laurentiu-Lunic.gif";
  flag.className = 'flag';
  flag.style.left = (x * pixelsPerPoint) + 'px';
  flag.style.top = (210 - raise + i * trackStep) + 'px'; // на линии

  // создаём tooltip
  const tip = document.createElement('div');
  tip.className = 'flag-tip';
  if (x === 100) tip.textContent = '100 – крутой никнейм';
  if (x === 200) tip.textContent = '200 – выкуп скакуна';
  if (x === 300) tip.textContent = '300 – шапка в Башне';
  if (x === 400) tip.textContent = '400 – статус в чате Телеграма';

  tip.style.position = 'absolute';
  tip.style.left = flag.style.left;
  tip.style.top = (parseInt(flag.style.top) - 40) + 'px';
  tip.style.padding = '6px 8px';
  tip.style.background = 'white';
  tip.style.color = 'black';
  tip.style.borderRadius = '6px';
  tip.style.fontSize = '14px';
  tip.style.opacity = '0';
  tip.style.transition = 'opacity .2s';
  tip.style.whiteSpace = 'nowrap';
  tip.style.pointerEvents = 'none';
  tip.style.zIndex = '999'; // поверх всего

  flag.addEventListener('mouseenter', () => tip.style.opacity = 1);
  flag.addEventListener('mouseleave', () => tip.style.opacity = 0);

  flagsContainer.appendChild(flag);
flagsContainer.appendChild(tip);
}

    // лошади
    const horse = document.createElement('div');
    horse.className = 'horse';
    horse.id = 'horse' + i;
    horse.style.top = 230 - raise + i * trackStep + 'px';
    horse.style.left = '0px';
    horse.setAttribute('data-points', horsePoints[i]);
    const img = document.createElement('img');
    img.src = horseImages[i];
    img.style.width = horseSizes[i] + 'px';
    horse.appendChild(img);
    race.appendChild(horse);

    // анимация
    setTimeout(() => { horse.style.left = (horsePoints[i] * pixelsPerPoint) + 'px'; }, 500);
  }
}

placeHorses();
</script>
</body>
</html>
