<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Скачки и задачки</title>

  <!-- Marmelad -->
  <link href="https://fonts.googleapis.com/css2?family=Marmelad&display=swap" rel="stylesheet">

  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --horse-w: 200px;
      --horse-h: 200;
      --fence-h: 120;
      --n: 10;
      --lane-color: rgba(255,255,255,0.7);
    }

    html,body{
      margin:0;
      padding:0;
      box-sizing:border-box;
      font-family: Arial, sans-serif;
      overflow-x:auto;
      overflow-y:auto;
      background:#64a8be;
    }

    /* Заголовок теперь статичный */
    .header {
      text-align:center;
      padding:20px 0;
      color:#fff;
      text-shadow:0 3px 8px rgba(0,0,0,0.6);
    }
    .header h1 {
      margin:0;
      font-family:'Marmelad',sans-serif;
      font-size:clamp(28px,5.5vw,56px);
    }

    .sky {
      height:35vh;
      background:#64a8be;
    }

    .sand {
      position:relative;
      width:100%;
      background:url("https://txtrs.ru/textures/sand/sand-6.jpg") repeat-x;
      background-size:auto; /* ✅ замостили снова */
      overflow:visible;
    }

    .fence {
      position:absolute;
      left:0;
      right:0;
      top:calc(var(--fence-top, -60px));
      height:var(--fence-h, 120px);
      background:url("https://i.postimg.cc/cJJ3rDsb/Chat-GPT-Image-21-2025-07-52-16.png") repeat-x bottom;
      background-size:auto 100%;
      z-index:300;
      pointer-events:none;
    }

    .stage {
      position:relative;
      width:5000px;
      margin:0 auto;
      z-index:400;
    }

    .lane {
      position:absolute;
      left:0;
      width:100%;
      height:2px;
      background:var(--lane-color);
      z-index:450;
    }

    .horse {
      position:absolute;
      left:0;
      z-index:500;
      transform-origin:left bottom;
      transition:left 1.6s ease;
    }
    .horse img {
      width:var(--horse-w);
      height:auto;
      display:block;
      user-select:none;
      -webkit-user-drag:none;
    }

    .horse::after{
      content:attr(data-points) " очков";
      position:absolute;
      bottom:calc(100% + 8px);
      left:50%;
      transform:translateX(-50%);
      padding:6px 8px;
      background:rgba(0,0,0,0.75);
      color:#fff;
      border-radius:6px;
      font-size:13px;
      white-space:nowrap;
      opacity:0;
      pointer-events:none;
      transition:opacity .15s;
      z-index:800;
    }
    .horse:hover::after{ opacity:1; }

    .page-bottom-space{height:120px;}
  </style>
</head>
<body>
  <!-- Заголовок теперь статичный -->
  <div class="header">
    <h1>Скачки и задачки</h1>
  </div>

  <div class="sky"></div>

  <div class="sand" id="sand">
    <div class="fence" id="fence"></div>
    <div class="stage" id="stage"></div>
  </div>

  <div class="page-bottom-space"></div>

  <script>
    (function(){
      const N = 10;
      const horsePoints = [1,2,4,0,5,2,0,0,1,0];

      // картинки
      const horseImgs = [
        "https://i.postimg.cc/593CXQst/20250920-1029-remix-01k5jsen2he3ebb44mn75tbs8q.png", // первая
        "https://i.postimg.cc/7LDH1T4z/20250920-1128-remix-01k5jwttgrervbg17xtjk37xgs.png",
        "https://i.postimg.cc/Cx0572Hd/20250920-1344-remix-01k5k4kktmeq4s374797sf9dvf.png",
        "https://i.postimg.cc/wBfB6jKs/20250920-1357-remix-01k5k5cjmcf2ja5878w22hhxh7.png",
        "https://i.ibb.co/kVFh9mPb/horse5.png",
        "https://i.ibb.co/1YthbMrH/horse6.png",
        "https://i.ibb.co/20VChFFM/horse7.png",
        "https://i.ibb.co/v4VJ1dPq/horse8.png",
        "https://i.ibb.co/nqXKgVV8/horse9.png",
        "https://i.ibb.co/KzbYP3cV/horse10.png"
      ];

      const sand = document.getElementById('sand');
      const fence = document.getElementById('fence');
      const stage = document.getElementById('stage');

      let horseW, horseH, fenceH, step;

      function layout(){
        horseW = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--horse-w'))||200;
        horseH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--horse-h'))||200;
        fenceH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--fence-h'))||120;
        step = Math.round(horseH/2);

        const overlap = Math.round(fenceH/2);
        const minimalSand = (horseH - overlap) + (N-1)*step;
        const desired65vh = Math.round(window.innerHeight*0.65);
        const sandH = Math.max(desired65vh, minimalSand+80);

        sand.style.height = sandH+"px";
        fence.style.height = fenceH+"px";
        fence.style.top = (-Math.round(fenceH/2))+"px";
        stage.style.height = sandH+"px";

        stage.innerHTML="";

        const horseBottomFirst = sandH - horseH + overlap;

        for(let i=0;i<N;i++){
          const bottom = horseBottomFirst - i*step;

          const lane=document.createElement('div');
          lane.className='lane';
          lane.style.bottom=(bottom-8)+'px';
          stage.appendChild(lane);

          const horse=document.createElement('div');
          horse.className='horse';
          horse.id='horse'+i;
          horse.style.bottom=bottom+'px';
          horse.setAttribute('data-points',horsePoints[i]||0);

          const img=document.createElement('img');
          img.src=horseImgs[i];
          img.alt='Лошадь '+(i+1);
          img.style.width=horseW+'px';
          horse.appendChild(img);

          stage.appendChild(horse);

          horse.style.left=((horsePoints[i]||0)*120)+'px';
        }
      }

      window.addEventListener('load',layout);
      window.addEventListener('resize',layout);
    })();
  </script>
</body>
</html>
